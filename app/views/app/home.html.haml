#app-home
  = form_tag search_path,method: 'get' do |f|
    .row
      .col-sm-10.col-md-10
        = text_field_tag :search ,params[:search],class:"search-text",placeholder: "Search for Books, Authors ..."
      .col-sm-2.col-md-2
        = submit_tag "Search", name: nil,class:"submit"
  .container
    - @books.each do|book|
      .col-sm-6.col-md-6
        .book
          .col-xs-4.col-sm-4
            = link_to  image_tag(book.image,class: "img-responsive",alt: book.name),user_book_path(user_id: book.owner, id: book)
          .col-xs-8.col-sm-8
            %h3
              = book.name
            = book.author
            %h5
              Will be shared by
              = link_to book.owner.name,user_path(book.owner)
            .address
              = book.owner.landmark
            .address
              = book.owner.fulladdress
            .request
              - unless current_user.has_an_open_request? book
                - @request = Request.new
                =form_for [current_user,@request] do |f|
                  = f.hidden_field :book_id,value: book.id
                  = f.hidden_field :request_type, value: Request::GIVE_AWAY
                  = f.submit "Request"
              - else
                - @request = current_user.get_request book
                = link_to "Requested",cancel_user_request_path(user_id:current_user,id:@request),method: :patch
